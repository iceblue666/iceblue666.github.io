\-\-\-
title:开发博客的一些点
time:2021-03-08 18:56:00
categories:前端,总结
tags:前端,博客
summary:开发博客的一些想法，记录下来
\-\-\-

# 开发博客的一些点

## 1. 文章详情内容可以用keep-alive

文章内容赋值了就不会变，所以可以用keep-alive减少开销

在router meta可以设置

```javascript
 {
  path:'/book',
  name:'book',
  components:Book,
  meta:{
     keepAlive:true //不需要被缓存的组件
 } 
```

## 2. moment对象比较

转化为时间戳比较

```javascript
tmepListDatas.sort((a,b) => {
    return moment(b.time).unix() - moment(a.time).unix();
})
```

但是注意，由于请求数据(虽然是mock到本地返回)，异步操作，因此必须在Promise.then里比较，否则比较函数可能执行完了，数组才加载进数据。

## 3. mock的post

mock的post传参会在config.body里面，但这是个字符串，需要JSON.parse()转成对象

## 4. 博客运行时间

moemnt的diff方法

`this.$moment().diff(this.$moment(this.$config.BlogStartTime),'days');`

## 5. 在mock中返回的数据

所有mock都是依赖于common.js暴露的tmepListDatas，根据esmodule的知识可知，import只会第一次复制进内存，后面的import都是从内存里拿来的同一个，所以可能存在的风险是如果在哪个地方修改了，会导致全局都修改了。

## 6. 【性能优化】v-if和v-show适当使用

**编译条件**：

v-if是惰性的，如果初始条件为假，则什么也不做；只有在条件第一次变为真时才开始局部编译（编译被缓存？编译被缓存后，然后再切换的时候进行局部卸载);

v-show是在任何条件下（首次条件是否为真）都被编译，然后被缓存，而且DOM元素保留；

**性能消耗**：

v-if有更高的切换消耗；

v-show有更高的初始渲染消耗；

## 7. 【性能优化】

![image-20210311141041931](E:\pictures\Typora\image-20210311141041931.png)

图片懒加载后

![image-20210311141540776](E:\pictures\Typora\image-20210311141540776.png)

把需要的element组件单独提取出来，可以看到没什么优化

![image-20210311143540868](E:\pictures\Typora\image-20210311143540868.png)